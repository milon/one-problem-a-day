<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="Solve one problem per day">

        <meta property="og:title" content="Erect the fence | One problem a day"/>
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://one-problem-a-day.milon.im/problems/erect-the-fence"/>
        <meta property="og:description" content="Solve one problem per day" />

        <title>Erect the fence | One problem a day</title>

        <link rel="home" href="https://one-problem-a-day.milon.im">
        <link rel="icon" href="/assets/images/favicon.ico">

                    <!-- Global site tag (gtag.js) - Google Analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-DPNYL8WECN"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());

                gtag('config', 'G-DPNYL8WECN');
            </script>
        
        <link href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,600,700,700i,800,800i" rel="stylesheet">
        <link rel="stylesheet" href="/assets/build/css/main.css?id=86ddee774e0bcf5a1bf6b25f7c738cbb">
    </head>

    <body class="flex flex-col justify-between min-h-screen bg-gray-100 text-gray-800 leading-normal font-sans">
        <header class="flex items-center shadow bg-white border-b h-24 py-4" role="banner">
            <div class="container flex items-center max-w-8xl mx-auto px-4 lg:px-8">
                <div class="flex items-center">
                    <a href="/" title="One problem a day home" class="inline-flex items-center">
                        <img class="h-8 md:h-10 mr-3" src="/assets/images/logo.svg" alt="One problem a day logo" />

                        <h1 class="text-lg md:text-2xl text-indigo-500 font-semibold hover:text-indigo-700 my-0">One problem a day</h1>
                    </a>
                </div>

                <div id="vue-search" class="flex flex-1 justify-end items-center">
                    <search></search>

                    <nav class="hidden lg:flex items-center justify-end text-lg">
    <a title="One problem a day - Problems" href="/problems"
        class="ml-6 text-gray-700 hover:text-indigo-600 ">
        Problems
    </a>
    <a title="One problem a day - About" href="/about"
        class="ml-6 text-gray-700 hover:text-indigo-600 ">
        About
    </a>
</nav>

                    <button class="flex justify-center items-center bg-indigo-500 border border-indigo-500 h-10 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

                </div>
            </div>
        </header>

        <nav id="js-nav-menu" class="w-auto px-2 pt-6 pb-2 bg-gray-200 shadow hidden lg:hidden">
    <ul class="my-0 list-none">
        <li class="pl-4 block">
            <a
                title="One problem a day"
                href="/"
                class="block mt-0 mb-4 text-sm no-underline text-gray-800 hover:text-indigo-500"
            >Home</a>
        </li>
        <li class="pl-4 block">
            <a
                title="One problem a day Problems"
                href="/problems"
                class="block mt-0 mb-4 text-sm no-underline text-gray-800 hover:text-indigo-500"
            >Problems</a>
        </li>
        <li class="pl-4 block">
            <a
                title="One problem a day About"
                href="/about"
                class="block mt-0 mb-4 text-sm no-underline text-gray-800 hover:text-indigo-500"
            >About</a>
        </li>
    </ul>
</nav>

        <main role="main" class="flex-auto w-full container max-w-4xl mx-auto py-16 px-6">
                
    <h1 class="leading-none mb-2">Erect the fence</h1>

    <p class="text-gray-700 text-xl md:mt-0">November 19, 2022</p>

                        <a
                href="/categories/math-and-geometry"
                title="View posts in math-and-geometry"
                class="inline-block bg-gray-300 hover:bg-indigo-200 leading-loose tracking-wide text-gray-800 uppercase text-xs font-semibold rounded mr-4 px-3 pt-px"
            >math-and-geometry</a>
            
    <div class="border-b border-indigo-200 mb-10 pb-4" v-pre>
        <p class="font-semibold">Problem URL: <a target="_blank" href="https://leetcode.com/problems/erect-the-fence/">Erect the fence</a></p>
        <p>The problem is asking us to find the convex hull given a set of 2D points.</p>

<p>Monotone Chain algorithm:</p>

<ol>
<li>Sort the points by x. (moving from left to right)</li>
<li>Initialize a stack with the first 2 points.</li>
<li>Starting from the thrid point (P3) in points , P1 = stack[-2] and P2 = stack[-1], if P3 is less counterclockwise to P1 than P2, pop P2 from the stack, keep doing this until P3 is more counterclockwise to P1 than P2 or if there is only one point left in the stack.</li>
<li>Append the current point to the stack and go to the next one.</li>
<li>Reverse points (moving from right to left), and repeat (2) - (4) to get the second Monotone Chain Stack.</li>
</ol>

<p>What this algorithm does is, first going from left to right of the points, construct the lower hull (the bottom half of the hull). Then, going from right to left, construct the upper hull (top half of the hull).</p>

<p>The process (2)-(4) is very similar to construct a regular Monotonic Stack, but instead of mataining the stack monotonically increasing, we maintain the chain fromed by the points in the stack moving counterclockwise!</p>

<p>Now the problem is given 3 points (P1, P2, P3), how to figure out if the chain P1->P2->P3 is moving counterclockwise. This is done by doing a Cross Product of the two vectors formed by V1 = (P1,P2) and V2 = (P2,P3). If you forgot the meaning of cross product please take 2 minutes and watch this video HERE (Time: 00:40 to 02:20). So basically, if the cross product of V1 and V2 is positive, this chain is not moving counterclockwise (pop P2 from the stack). And if the cross product is negtive, this chain is moving counterclockwise (append P3 to the stack).</p>

<p>Cross product formula: <br/>
<code>V1 = (a,b), V2 = (c,d)</code> <br/>
<code>V1 X V2 = ad - bc</code></p>

<pre><code class="language-python">class Solution:
    def outerTrees(self, points: List[List[int]]) -&gt; List[List[int]]:
        def crossProduct(p1: List[List[int]], p2: List[List[int]], p3: List[List[int]]):
            # V1 = (a,b), V2 = (c,d)
            # V1 X V2 = a*d - b*c
            a = p2[0]-p1[0]
            b = p2[1]-p1[1]
            c = p3[0]-p1[0]
            d = p3[1]-p1[1]    
            return a*d - b*c

        def constructHalfHull(points: List[List[int]]):
            stack = []
            for p in points:
                ### if the chain formed by the current point
                ### and the last two points in the stack is not counterclockwise, pop it
                while len(stack)&gt;=2 and crossProduct(stack[-2],stack[-1],p)&gt;0:
                    stack.pop()
                ### append the current point.
                stack.append(tuple(p))
            return stack

        points.sort()
        leftToRight = constructHalfHull(points)
        ### reverse points, so we are moving from right to left
        rightToLeft = constructHalfHull(points[::-1])

        ### it is posible that the top and bottom parts have same points (e.g., all points form a line)
        ### we remove the duplicated points using a set
        return list(set(leftToRight + rightToLeft))
</code></pre>

<p>Time complexity: <code>O(nlogn)</code> <br/>
Space complexity: <code>O(n)</code></p>
    </div>

    <nav class="flex justify-between text-sm md:text-base">
        <div>
                            <a href="https://one-problem-a-day.milon.im/problems/maximum-product-after-k-increments" title="Older Post: Maximum product after k increments">
                    &LeftArrow; Maximum product after k increments
                </a>
                    </div>

        <div>
                            <a href="https://one-problem-a-day.milon.im/problems/binary-subarrays-with-sum" title="Newer Post: Binary subarrays with sum">
                    Binary subarrays with sum &RightArrow;
                </a>
                    </div>
    </nav>
        </main>

        <footer class="bg-white text-center text-sm mt-12 py-4" role="contentinfo">
            <ul class="flex flex-col md:flex-row justify-center list-none">
                <li class="md:mr-2">
                    &copy; <a href="/" title="One problem a day">One problem a day</a> 2025.
                </li>
            </ul>
        </footer>

        <script src="/assets/build/js/main.js?id=b0c78f41caeb91e04be3118d364810dc"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>
    </body>
</html>
